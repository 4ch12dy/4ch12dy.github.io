<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 获取macOS序列号UUID等 · 4ch12dy</title><meta name="description" content="获取macOS序列号UUID等 - 4ch12dy"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="../../../../../favicon.png"><link rel="stylesheet" href="../../../../../css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://github.com/4ch12dy/4ch12dy.github.io.git/atom.xml" title="4ch12dy"></head><body><div class="wrap"><header><a href="../../../../../index.html" class="logo-link"><img src="../../../../../favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="../../../../../index.html" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="../../../../../archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://4ch12dy.site/aboutme/" target="_blank" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="../../../../../atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">获取macOS序列号UUID等</h1><div class="post-info">Aug 1, 2017</div><div class="post-content"><blockquote>
<blockquote>
<p>记录下，可能会用到</p>
</blockquote>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">+ (NSString *)serialNumber &#123;</div><div class="line">  io_service_t platformExpert = IOServiceGetMatchingService(</div><div class="line">      kIOMasterPortDefault, IOServiceMatching(&quot;IOPlatformExpertDevice&quot;));</div><div class="line">  if (!platformExpert) return nil;</div><div class="line"></div><div class="line">  NSString *serial = CFBridgingRelease(IORegistryEntryCreateCFProperty(</div><div class="line">      platformExpert, CFSTR(kIOPlatformSerialNumberKey), kCFAllocatorDefault, 0));</div><div class="line"></div><div class="line">  IOObjectRelease(platformExpert);</div><div class="line"></div><div class="line">  return serial;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSString *)hardwareUUID &#123;</div><div class="line">  io_service_t platformExpert = IOServiceGetMatchingService(</div><div class="line">      kIOMasterPortDefault, IOServiceMatching(&quot;IOPlatformExpertDevice&quot;));</div><div class="line">  if (!platformExpert) return nil;</div><div class="line"></div><div class="line">  NSString *uuid = CFBridgingRelease(IORegistryEntryCreateCFProperty(</div><div class="line">      platformExpert, CFSTR(kIOPlatformUUIDKey), kCFAllocatorDefault, 0));</div><div class="line"></div><div class="line">  IOObjectRelease(platformExpert);</div><div class="line"></div><div class="line">  return uuid;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSString *)osVersion &#123;</div><div class="line">  return [SNTSystemInfo _systemVersionDictionary][@&quot;ProductVersion&quot;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSString *)osBuild &#123;</div><div class="line">  return [SNTSystemInfo _systemVersionDictionary][@&quot;ProductBuildVersion&quot;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSString *)shortHostname &#123;</div><div class="line">  return [[[SNTSystemInfo longHostname] componentsSeparatedByString:@&quot;.&quot;] firstObject];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSString *)longHostname &#123;</div><div class="line">  char hostname[MAXHOSTNAMELEN];</div><div class="line">  gethostname(hostname, (int)sizeof(hostname));</div><div class="line">  return @(hostname);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">serialnum:C02R****FVH5</div><div class="line">UUID:9C090ED8-****-540B-****-0C186E98FDFE</div></pre></td></tr></table></figure>
<h3 id="忽略一些警告的标识"><a href="#忽略一些警告的标识" class="headerlink" title="忽略一些警告的标识"></a>忽略一些警告的标识</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">#pragma clang diagnostic push</div><div class="line">#pragma clang diagnostic ignored &quot;警告名称&quot;</div><div class="line"></div><div class="line">￼// 被夹在这中间的代码针对于此警告都会忽视不显示出来</div><div class="line"></div><div class="line">//常见警告的名称</div><div class="line">//1.声明变量未使用  &quot;-Wunused-variable&quot;</div><div class="line">//2.方法定义未实现  &quot;-Wincomplete-implementation&quot;</div><div class="line">//3.未声明的选择器  &quot;-Wundeclared-selector&quot;</div><div class="line">//4.参数格式不匹配  &quot;-Wformat&quot;</div><div class="line">//5.废弃掉的方法     &quot;-Wdeprecated-declarations&quot;</div><div class="line">//6.不会执行的代码  &quot;-Wunreachable-code&quot;</div><div class="line">//7.忽略在arc 环境下performSelector产生的 leaks 的警告 &quot;-Warc-performSelector-leaks&quot;</div><div class="line"></div><div class="line">#pragma clang diagnostic pop</div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="../../../03/内核扩展-驱动开发实例/内核扩展-驱动开发实例/" class="prev">PREV</a><a href="../../遍历自身加载的dylib获取载入地址和ASLR地址等/遍历自身加载的dylib获取载入地址和ASLR地址等/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = '4ch12dy';
var disqus_identifier = '2017/08/01/获取macOS序列号UUID等/获取macOS序列号UUID等/';
var disqus_title = '获取macOS序列号UUID等';
var disqus_url = 'https://github.com/4ch12dy/4ch12dy.github.io.git/2017/08/01/获取macOS序列号UUID等/获取macOS序列号UUID等/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//4ch12dy.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 - 2019 <a href="https://github.com/4ch12dy/4ch12dy.github.io.git">4ch12dy</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>